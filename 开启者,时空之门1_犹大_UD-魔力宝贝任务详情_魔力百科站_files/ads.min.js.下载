//五图广告数据
//链接如果没有就留空字符串
//宽：202px，高：202px
var adsGroup = [{
    id: 2,
    link: 'Page/Detail/ba563819-8462-4c5c-aca0-0ecda638ddb1',
    title: '【伊人】百科攻略组专业带就职，各种任务',
    pic: 'images/ads/ads_grid_2.jpg'
},
{
    id: 5,
    link: 'http://www.1moli.net',
    title: '魔力宝贝单机DIY版QQ群：13238409',
    pic: 'images/ads/adsGroup202008006.jpg'
},
{
    id: 3,
    link: 'images/ads/ads-grid-3-pic.png',
    title: '【代练】怀旧魔力起点群代练，QQ:389604628',
    pic: 'images/ads/ads_grid_3.jpg'
},
{
    id: 4,
    link: 'http://www.1moli.net',
    title: '畅游·法兰 QQ群13238336',
    pic: 'images/ads/gezi20210130.jpg'
},
{
    id: 1,
    link: 'tencent://message/?uin=78187737&Site=&Menu=yes',
    title: '魔力宝贝，仙境传说，架设一条龙，QQ78187737',
    pic: 'images/ads/home_grid_ads_5_20200806.jpg'
}];
/*
* banner广告
* id按顺序
* 链接如果没有就留空
*　有多少条就会添加多少个轮播图
* 宽：726px，高：291px
*/
var bannerAds = [
    {
        id: 1,
        pic: 'images/ads/2020082001.jpg',
        link: 'www.moli2.net'

    },
    {
        id: 2,
        pic: 'images/ads/banner20210130.jpg',
        link: 'www.1moli.net'
    }
    //{
    //    id: 2,
    //    pic: 'images/ads/ads_banner_3.jpg',
    //    link: 'www.bilibili.com/video/av20456912'
    //},
    //{
    //    id: 3,
    //    pic: 'images/ads/ads_banner_4.jpg',
    //    link: 'item.taobao.com/item.htm?id=571934684313'
    //}
]
/**
 * 底部广告
 * 有多少个显示多少个，一行4个，最好是4的倍数
 * 宽：258.5，高：76
 */
var footerAds = [{
    id: 0,
    placeholder: '虚位以待，广告联系QQ:183204816',
    pic: '',
    link: ''
}, {
    id: 1,
    placeholder: '虚位以待，广告联系QQ:183204816',
    pic: '',
    link: ''
}, {
    id: 2,
    placeholder: '虚位以待，广告联系QQ:183204816',
    pic: '',
    link: ''
}, {
    id: 3,
    placeholder: '虚位以待，广告联系QQ:183204816',
    pic: '',
    link: ''
}]
/**
 * 公告栏广告，350x160
 */
var noticeAds = [
    {
        id: 2,
        pic: 'images/ads/notice_ads_202008006.jpg',
        link: 'www.moli2.net/download.php',
        // placeholder: '广告位 350x160<br />咨询QQ：183204816'
    },
    {
        id: 3,
        pic: 'images/ads/mfl3.jpg',
        link: 'shang.qq.com/wpa/qunwpa?idkey=715e04c21bac566cf1063d4d1bf9a6f8c64861be7a93511f3b015b4b1dec5733',
        // placeholder: '广告位 350x160<br />咨询QQ：183204816'
    }]

/**
 * 显示广告方法
 */
var adsFun = function () {
    var _box = $('#index-ads-grid');

    var _len = 26;

    $.each(adsGroup, function (index, item, arr) {
        var $link = !item.link ? 'javascript:void(0)' : item.link,
            $img = !item.pic ? '../images/ads/ads_gird_placeholder.jpg' : item.pic,
            $title = item.title.length > _len ? item.title.substring(0, _len) + '...' : item.title
        var $html = '<div class="item"><a href="' + $link + '" class="card item-link" target="_blank"title="' + item.title + '"><div class="p-2 ads-index-item-title" style="height:60px;overflow:hidden;line-height:1.3;">' + $title + '</div><div class="ads-index-item-img"><img class="card-img-bottom " src="' + $img + '" alt="" style="width:100%;"></div></a></div>'
        _box.append($html);
    })
}

/**
 * banner添加
 */
var firstLinksOptions = {
    first: {
        url: 'tencent://AddContact/?fromId=45&fromSubId=1&subcmd=all&uin=12640711&website=www.oicqzone.com',
        left: '357px',
        bottom: '63px',
        width: '161px',
        height: '43px',
    },
    second: {
        url: 'tencent://AddContact/?fromId=45&fromSubId=1&subcmd=all&uin=12640712&website=www.oicqzone.com',
        left: '357px',
        bottom: '14px',
        width: '161px',
        height: '43px',
    }
}
var secondLinksOptions = {
    first: {
        url: 'http://www.bilibili.com/video/av20456912',
        left: '187px',
        bottom: '125px',
        width: '345px',
        height: '50px',
    },
    second: {
        url: 'https://www.bilibili.com/video/av18817105',
        left: '187px',
        bottom: '65px',
        width: '345px',
        height: '50px',
    }
}
var bannerFun = function () {
    var _banner_wrap = $('#mainSlide');
    var _banner_wrap_id = _banner_wrap.attr('id');
    var _item = _banner_wrap.children('.carousel-inner');
    var _nav = _banner_wrap.children('.carousel-indicators');
    for (var i = 0; i < bannerAds.length; i++) {
        var is_first = i == 0 ? 'active' : '';
        var _nav_item = '<li data-target="#' + _banner_wrap_id + '" data-slide-to="' + i + ' class=' + is_first + '"></li>';
        _nav.append(_nav_item);

        var _item_link = !bannerAds[i].link ? 'javascript:void(0);' : '//' + bannerAds[i].link;
        var _item_html = '<a href="' + _item_link + '" class="carousel-item ' + is_first + '" target="_blank"><img class="d-block img-fluid" src="' + bannerAds[i].pic + '" alt="' + bannerAds[i].title + '" /></a>';

        _item.append(_item_html);
    }
    setTimeout(function () {

        bannerTwoLinks(_item.children('a')[1], firstLinksOptions);
        bannerTwoLinks(_item.children('a')[3], secondLinksOptions);
    }, 0)

}

// banner，第一张上加链接
//视频图，345*50，
var bannerTwoLinks = function (item, options) {
    var bannerItem = $(item);
    var url_first = options.first.url,
        url_second = options.second.url;
    var html = '<a href="' + url_first + '" target="_blank" class="first-link"></a><a href="' + url_second + '" target="_blank" class="second-link"></a>';
    bannerItem.append(html);
    var firstLink = bannerItem.children('.first-link'),
        secondLink = bannerItem.children('.second-link');
    firstLink.css({
        position: 'absolute',
        left: options.first.left,
        bottom: options.first.bottom,
        'z-index': 1,
        display: 'block',
        width: options.first.width,
        height: options.first.height,

    });
    secondLink.css({
        position: 'absolute',
        left: options.second.left,
        bottom: options.second.bottom,
        'z-index': 1,
        display: 'block',
        width: options.second.width,
        height: options.second.height,
    });
}

/**
 * 页脚格子广告
 */
var footerAdsFun = function () {
    var ele = $('#ads-footer');
    for (var i = 0; i < footerAds.length; i++) {
        var _item_link = !footerAds[i].link ? 'javascript:void(0);' : '//' + footerAds[i].link;
        var _img = !footerAds[i].pic ? '' : '<img src="' + footerAds[i].pic + '" alt="' + footerAds[i].title + '" />';
        var _html = '<div class="col-3"><a href="' + _item_link + '" class="item">' + _img + '<div class="item-text">' + footerAds[i].placeholder + '</div></a></div>';
        ele.append(_html);
    }
}
/**
 * 公告栏广告
 */
var noticeAdsFun = function () {
    var ele = $('#ads-index-notice'),
        img = ele.children('img');
    var html = '';
    $.each(noticeAds, function (index, item, arr) {
        var pic = item.pic ? item.pic : item.placeholder;
        var _html = '<a href="//' + item.link + '" target="_blank" class="d-block mb-2"><img src="' + item.pic + '" alt=""  class="d-block"/></a>';
        html += _html;
    })
    ele.html(html);

}

$(function () {
    adsFun();//显示的字多少，就改这个数字,实测25可以，
    bannerFun();
    fullScreenAds()
    //footerAdsFun()
    noticeAdsFun();
})
var fullScreenAds = function () {
    // 如果存在is_clear，证明已经清除过缓存
    // if (!window.localStorage.getItem('close_full_1234567890211')) {
    //     var url = 'https://jq.qq.com/?_wv=1027&k=Dokzdxm7'
    //     var src = 'images/ads/zhiming.jpg'
    //     var html = '<div id="full-screen-ads" style="position:fixed;left:0;top:0;z-index:999;" class="d-flex full-height full-width align-items-center justify-content-center"><a href="javascript:void(0);"  class="d-block full-width full-height pos-a" style="left:0;top:0;z-index:0;background-color:rgba(0,0,0,.5);"></a><a href="' + url + '" ' + (url && url !== 'javascript:;' ? 'target="_blank"' : '') + ' class="d-block pos-r p-1" style="z-index:1;"><img src="' + src + '" class="d-block" alt=""  style="height:600px"/></a></div>';
    //     $(document.body).append(html);
    //     setTimeout(function () {
    //         $(document).on('click', '#full-screen-ads', function (e) {
    //             $('#full-screen-ads').remove();
    //             window.localStorage.setItem('close_full_1234567890211', 'true');
    //         });
    //     }, 100);
    // }
}